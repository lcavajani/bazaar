---
# TODO: add encrypt
# TODO: add vars to choose between wg and k8s
vault_encrypt: true
host_vars_dir: "{{ inventory_dir }}/host_vars"

wireguard:
  secrets_dir: "{{ inventory_dir }}/secrets/{{ inventory_hostname }}/wireguard"
  priv_key: "{{ inventory_dir }}/secrets/{{ inventory_hostname }}/wireguard/priv_key"
  pub_key: "{{ inventory_dir }}/secrets/{{ inventory_hostname }}/wireguard/pub_key"
  preshared_key: "{{ inventory_dir }}/secrets/{{ inventory_hostname }}/wireguard/preshared_key"

kubernetes:
  secrets_dir: "{{ inventory_dir }}/secrets"
  # KUBEADM
  kubeadm:
    dir: "{{ inventory_dir }}/secrets/kubernetes/kubeadm"
    token: "{{ inventory_dir }}/secrets/kubernetes/kubeadm/token"
    ca_cert_hash: "{{ inventory_dir }}/secrets/kubernetes/kubeadm/ca-cert-hash"
  # KUBERNETES
  pki:
    dir: "{{ inventory_dir }}/secrets/kubernetes/pki"
    etcd_dir: "{{ inventory_dir }}/secrets/kubernetes/pki/etcd"
    ca:
      common_name: "{{ (cluster_name | default('kubernetes')) + '-ca' }}"
      openssl_conf: "{{ inventory_dir }}/secrets/kubernetes/pki/ca_openssl.conf"
      crt: "{{ inventory_dir }}/secrets/kubernetes/pki/ca.crt"
      key: "{{ inventory_dir }}/secrets/kubernetes/pki/ca.key"
    front_proxy_ca:
      common_name: "front-proxy-ca"
      openssl_conf: "{{ inventory_dir }}/secrets/kubernetes/pki/front-proxy_openssl.conf"
      crt: "{{ inventory_dir }}/secrets/kubernetes/pki/front-proxy.crt"
      key: "{{ inventory_dir }}/secrets/kubernetes/pki/front-proxy.key"
    etcd:
      common_name: "etcd-ca"
      openssl_conf: "{{ inventory_dir }}/secrets/kubernetes/pki/etcd/ca_openssl.conf"
      crt: "{{ inventory_dir }}/secrets/kubernetes/pki/etcd/ca.crt"
      key: "{{ inventory_dir }}/secrets/kubernetes/pki/etcd/ca.key"
